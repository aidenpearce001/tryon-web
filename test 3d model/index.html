<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Redner 3D Ring</title>
    <style>
			body {
				background-color: #cce0ff;
				color: #000;
			}
			a {
				color: #080;
			}
      #gui_container{
        position: absolute;
        left: 80%;
      }
      #gui{
        transform:translate(200%, 300px);
      }
		</style>
  </head>
  <body>
    <div id="gui_container"></div>
    <!-- <script src="./js/three.js"></script> -->
    <script type="module">
      // Import 
      import * as THREE from './js/three.module.js';
      import { WEBGL } from './jsm/WebGL.js';
      import { GLTFLoader } from './jsm/loaders/GLTFLoader.js';
      import { OrbitControls } from './jsm/controls/OrbitControls.js';
      import Stats from './jsm/libs/stats.module.js';
      import {GUI} from './jsm/libs/dat.gui.module.js';

      // Variabble
      var SCREEN_WIDTH = window.innerWidth ;
      var SCREEN_HEIGHT = window.innerHeight ;

      var container, stats;
      var camera, scene, renderer;

      container = document.createElement( 'div' );
      document.body.appendChild( container );

      // Scene and backgroud here
      scene = new THREE.Scene();
      // scene.fog = new THREE.Fog( 0xcce0ff, 500, 10000 );
      const bg = new THREE.TextureLoader();
      const bgTexture = bg.load('https://images.unsplash.com/photo-1585130401366-fe05a8d813c4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1424&q=80');
      scene.background = bgTexture;


      //Lightning 
      const color = 0xFFFFFF;
      const intensity = 1;
      const light = new THREE.DirectionalLight(color, intensity);
      light.position.set(0, 10, 0);
      light.target.position.set(-5, 0, 0);
      scene.add(light);
      scene.add(light.target);

      // var gui = new GUI( { autoPlace: false, width: 300 } );
      const gui = new GUI({ width: 300 });
      gui.domElement.id = 'gui';
      gui_container.appendChild(gui.domElement);

      gui.add(light, 'intensity', 0, 2, 0.01);
      gui.add(light.target.position, 'x', -10, 10, .01);
      gui.add(light.target.position, 'z', -10, 10, .01);
      gui.add(light.target.position, 'y', 0, 10, .01);

      // var light = new THREE.AmbientLight( 0xFFFFFF );
      // light.position.x = 300;
      // light.position.y = 250;
      // light.position.z = - 500;
      // scene.add( light );

      // Camera position
      camera = new THREE.PerspectiveCamera( 40, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 10000 );
      camera.position.set( 30, 30, 100 );

      // Object's mesh
      var mesh = new THREE.Mesh(
        new THREE.BoxGeometry(20, 20, 20),
        new THREE.MeshStandardMaterial({
            color: 0xFFFFFF
        }));
      scene.add(mesh);

      // Render 
      renderer = new THREE.WebGLRenderer( { antialias: true } );
      renderer.setPixelRatio( window.devicePixelRatio );
      renderer.setSize( SCREEN_WIDTH, SCREEN_HEIGHT );
      container.appendChild( renderer.domElement );
      renderer.outputEncoding = THREE.sRGBEncoding;

      // Control camera
      var controls = new OrbitControls( camera, renderer.domElement );
      controls.maxPolarAngle = 0.9 * Math.PI / 2;
      controls.enableZoom = false;

      //Load 3d Model
      var loader = new GLTFLoader()
      loader.load( 'out.glb', function ( gltf ) {

        scene.add( gltf.scene );

        }, undefined, function ( error ) {

        console.error( error );

      } );

      window.addEventListener( 'resize', onWindowResize, false );
      function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );

      }

      function animate() {

        requestAnimationFrame( animate );

        renderer.render( scene, camera );
        // stats.update();

      }

      function render() {
          renderer.render(scene, camera)
      }

      // Show FPS
      // stats = new Stats();
      // container.appendChild( stats.dom );

      if ( WEBGL.isWebGLAvailable() ) {
        
       
        animate();

      } else {

        var warning = WEBGL.getWebGLErrorMessage();
        document.getElementById( 'container' ).appendChild( warning );

      }
    </script>
  </body>
</html>